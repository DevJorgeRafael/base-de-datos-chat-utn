// ───── TABLAS MAESTRAS ─────

TABLE MVL_TAB_TIPO_MENSAJES {
  TIPO_MENSAJE_CODIGO VARCHAR2(10) [pk]
  TIPO_MENSAJE_NOMBRE VARCHAR2(12) [unique, not null, note: 'Texto, Imagen, Archivo']
  TIPO_MENSAJE_DESCRIPCION VARCHAR2(25) [unique, not null, note: 'Tipo Texto, Tipo Imagen, Tipo Archivo']
}

TABLE MVL_TAB_ARCHIVOS {
  ARCHIVO_CODIGO VARCHAR2(10) [pk]
  ARCHIVO_NOMBRE VARCHAR2(100) [not null, note: 'Nombre del archivo original']
  ARCHIVO_PESO INTEGER [not null, note: 'Tamaño en bytes']
  ARCHIVO_ESTADO VARCHAR2(1) [default: 'A', note: "'A' activo, 'I' inactivo"]
  ARCHIVO_RUTA VARCHAR2(200) [not null]
  MIME_TYPE VARCHAR2(100) [not null]
  FECHA_SUBIDA TIMESTAMP [not null, note: 'Default: CURRENT_TIMESTAMP']
}

TABLE MVL_TAB_ESTADO_ENTREGA_MENSAJE {
  ESTADO_ENTREGA_MENSAJE_CODIGO VARCHAR2(10) [pk]
  ESTADO_ENTREGA_MENSAJE_NOMBRE VARCHAR2(10) [unique, not null, note: 'Enviado, Recibido, Leído']
}

TABLE MVL_TAB_CLAVES_CONVERSACION {
  CLAVE_CONVERSACION_CODIGO VARCHAR2(10) [pk]
  CONVERSACION_CODIGO VARCHAR2(50) [not null, unique]
  CLAVE_BASE64 VARCHAR2(512) [not null]
  CLAVE_ESTADO VARCHAR2(1) [default: 'A', note: "'A' activo, 'I' inactivo"]
  FECHA_CREACION TIMESTAMP [not null, note: 'Default: SYSDATE']
}

TABLE MVL_TAB_RED_SOCIAL_CICLOS_ACAD {
  CODIGO_RD_CICLO_ACAD VARCHAR2(10) [pk]
  CODIGO_CICLO_ACADEMICO VARCHAR2(10)
  CICLO_ACAD_DESCRIPCION VARCHAR2(100)
  CICLO_ACAD_ESTADO VARCHAR2(1) [default: 'A', note: "'A' activo, 'I' inactivo"]
  MENSAJE_APP VARCHAR2(100)
  ESTADO_APP VARCHAR2(1) [default: 'A', note: "'A' activo, 'I' inactivo"]
  VERSION_BDD_LOCAL NUMBER(5) [default: 1]
  CICLO_ACAD_FECHA_ASIGNACION TIMESTAMP [not null, note: 'Default: CURRENT_TIMESTAMP']
}

// ───── MENSAJES INDIVIDUALES ─────

TABLE MVL_TAB_CONV_INDIVIDUALES {
  CONVERSACION_INDIVIDUAL_CODIGO VARCHAR2(10) [pk]
  CUENTA_1 VARCHAR2(11) [not null]
  CUENTA_2 VARCHAR2(11) [not null]
  CONVERSACION_ESTADO VARCHAR2(1) [default: 'A', note: "'A' activo, 'I' inactivo"]
}

TABLE MVL_TAB_MSJ_INDIVIDUALES {
  MENSAJE_INDIVIDUAL_CODIGO VARCHAR2(10) [pk]
  CONVERSACION_CODIGO VARCHAR2(10) [not null, ref: > MVL_TAB_CONV_INDIVIDUALES.CONVERSACION_INDIVIDUAL_CODIGO]
  EMISOR_CUENTA VARCHAR2(11) [not null]
  RECEPTOR_CUENTA VARCHAR2(11) [not null]
  MENSAJE_ESTADO VARCHAR2(1) [default: 'A']
  TIPO_MENSAJE_CODIGO VARCHAR2(10) [not null, ref: > MVL_TAB_TIPO_MENSAJES.TIPO_MENSAJE_CODIGO]
  ARCHIVO_CODIGO VARCHAR2(10) [ref: > MVL_TAB_ARCHIVOS.ARCHIVO_CODIGO, null]
  CONTENIDO CLOB [null]
  FECHA TIMESTAMP [not null, note: 'Default: SYSDATE']
  MENSAJE_PADRE_CODIGO VARCHAR2(10) [ref: > MVL_TAB_MSJ_INDIVIDUALES.MENSAJE_INDIVIDUAL_CODIGO, null]
}

TABLE MVL_TAB_LECTURA_MSJ_INDIVIDUAL {
  LECTURA_MSJ_INDIVIDUAL_CODIGO VARCHAR2(10) [pk]
  MENSAJE_CODIGO VARCHAR2(10) [not null, unique, ref: > MVL_TAB_MSJ_INDIVIDUALES.MENSAJE_INDIVIDUAL_CODIGO]
  ESTADO_MENSAJE_CODIGO VARCHAR2(10) [not null, ref: > MVL_TAB_ESTADO_ENTREGA_MENSAJE.ESTADO_ENTREGA_MENSAJE_CODIGO]
  LECTURA_MENSAJE_ESTADO VARCHAR2(1) [default: 'A']
  FECHA_LECTURA TIMESTAMP [not null, note: 'Default: SYSDATE']
}

// ───── MENSAJES GRUPALES ─────

TABLE MVL_TAB_TIPOS_CONV_GRUPALES {
  TIPO_CONV_GRUPAL_CODIGO VARCHAR2(10) [pk]
  TIPO_CONV_GRUPAL_NOMBRE VARCHAR2(10) [not null, note: 'Materia, Carrera, Facultad']
  TIPO_CONV_GRUPAL_CATEGORIA VARCHAR2(1) [not null, note: "'G' estudiantes/docentes, 'D' solo docentes"]
}

TABLE MVL_TAB_CONV_GRUPALES {
  CONVERSACION_GRUPAL_CODIGO VARCHAR2(50) [pk, note: 'ID fijo: materia/carrera/facultad']
  NOMBRE VARCHAR2(100) [not null]
  CONVERSACION_ESTADO VARCHAR2(1) [default: 'A']
  TIPO_CONV_GRUPAL_CODIGO VARCHAR2(10) [ref: > MVL_TAB_TIPOS_CONV_GRUPALES.TIPO_CONV_GRUPAL_CODIGO]
}

TABLE MVL_TAB_MSJ_GRUPALES {
  MENSAJE_GRUPAL_CODIGO VARCHAR2(10) [pk]
  CONVERSACION_CODIGO VARCHAR2(50) [not null, ref: > MVL_TAB_CONV_GRUPALES.CONVERSACION_GRUPAL_CODIGO]
  EMISOR_CUENTA VARCHAR2(11) [not null]
  MENSAJE_ESTADO VARCHAR2(1) [default: 'A']
  TIPO_MENSAJE_CODIGO VARCHAR2(10) [not null, ref: > MVL_TAB_TIPO_MENSAJES.TIPO_MENSAJE_CODIGO]
  ARCHIVO_CODIGO VARCHAR2(10) [ref: > MVL_TAB_ARCHIVOS.ARCHIVO_CODIGO, null]
  CONTENIDO CLOB [null]
  FECHA TIMESTAMP [not null, note: 'Default: SYSDATE']
  MENSAJE_PADRE_CODIGO VARCHAR2(10) [ref: > MVL_TAB_MSJ_GRUPALES.MENSAJE_GRUPAL_CODIGO, null]
}

TABLE MVL_TAB_LECTURA_MSJ_GRUPALES {
  LECTURA_MENSAJE_GRUPAL_CODIGO VARCHAR2(10) [pk]
  MENSAJE_CODIGO VARCHAR2(10) [not null, ref: > MVL_TAB_MSJ_GRUPALES.MENSAJE_GRUPAL_CODIGO]
  USUARIO_CUENTA VARCHAR2(11) [not null]
  LECTURA_MSJ_GRPL_ESTADO VARCHAR2(1) [default: 'A']
  ESTADO_ENTREGA_MSJ_CODIGO VARCHAR2(10) [not null, ref: > MVL_TAB_ESTADO_ENTREGA_MENSAJE.ESTADO_ENTREGA_MENSAJE_CODIGO]
  FECHA_LECTURA TIMESTAMP [not null, note: 'Default: SYSDATE']
}

// ───── SILENCIOS ─────

TABLE MVL_TAB_SILENCIO_CONVERSACION {
  SILENCIO_CONVERSACIONES_CODIGO VARCHAR2(10) [pk]
  USUARIO_CUENTA VARCHAR2(11) [not null]
  SILENCIO_CONVERSACION_ESTADO VARCHAR2(1) [default: 'A']
  CONVERSACION_INDIVIDUAL_CODIGO VARCHAR2(10) 
  CONVERSACION_GRUPAL_CODIGO VARCHAR2(50)
}
